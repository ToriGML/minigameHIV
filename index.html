<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>
    <title>Document</title>
    <style>
        body{
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div id="container" style="position: absolute; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.26);">

    </div>
    <a-scene mindar-image="imageTargetSrc: ./pingu.mind" color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">
        <a-assets>

        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        <a-entity mindar-image-target="targetIndex: 0" id="fase01">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 1" id="fase02">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 2" id="fase03">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 3" id="fase04">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 4" id="fase05">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 5" id="fase06">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 6" id="fase07">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 7" id="fase08">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 8" id="fase09">
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 9" id="fase10">
        </a-entity>

    </a-scene>

    <script>

        const colors = ['red', 'blue', 'green', 'yellow', 'purple', 'orange', "black", "white"];

        const cores = (correctColor) => {
            let colorsArr = [];

            while (colorsArr.length < 4) {
                let randomColor = colors[Math.floor(Math.random() * colors.length)];
                if (!colorsArr.includes(randomColor) && randomColor != correctColor) {
                    colorsArr.push(randomColor);
                }
            }

            return colorsArr;
        };

        document.getElementById("fase01").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', resposta(element.textContent))
            });
        })
        document.getElementById("fase02").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', resposta(element.textContent))
            });
        })
        document.getElementById("fase03").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', resposta(element.textContent))
            });
        })
        document.getElementById("fase04").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase05").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase06").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase07").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase08").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase09").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })
        document.getElementById("fase10").addEventListener("targetFound", (e) => {
            document.getElementById("container").innerHTML = randomHTML()
            btns().forEach(element => {
                element.addEventListener('click', ()=>resposta(element.textContent))
            });
        })

        const randomHTML = () => {
            const correctColor = colors[Math.floor(Math.random() * colors.length)]
            const [cor1, cor2, cor3, cor4] = cores(correctColor)
            const [nome1, nome2, nome3, nome4] = cores(correctColor)
            const aaa = [cor1, cor2, cor3, correctColor].sort(() => Math.random() - 0.5)
            let html = `
            <div>
                <h1 style="color: ${cor4};" id="H1">${correctColor}</h1>
                <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                <button id="btn1" style="background-color: ${aaa[0]};" value="${aaa[0]}">
                    ${nome1}
                </button>
                <button id="btn2" style="background-color: ${aaa[1]};" value="${aaa[1]}">
                    ${nome2}
                </button>
                <button id="btn3" style="background-color: ${aaa[2]};" value="${aaa[2]}">
                    ${nome3}
                </button>
                <button id="btn4" style="background-color: ${aaa[3]};" value="${aaa[3]}">
                    ${nome4}
                </button>
                </div>
            </div>
          `
            return html
        }
        // Separar em um css
        // Deixar bonito
        // ** LÃ³gica de jogo

        const btns = () => {
            const btn1 = document.getElementById("btn1")
            const btn2 = document.getElementById("btn2")
            const btn3 = document.getElementById("btn3")
            const btn4 = document.getElementById("btn4")
            return [btn1, btn2, btn3, btn4]
        }

        const resposta = (color) => {
            const h1 = document.querySelector('#H1');
            console.log(color)
            console.log(h1.textContent)
            if (h1.textContent === color) {
                alert("Ganhou")
            } else {
                alert("Game Over | Loser")
            }
        }

    </script>
</body>

</html>